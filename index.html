<!DOCTYPE html>
<html>
<head>
  <title>Office Cafe Services</title>
  <style>
    body { font-family: Arial; background:#f5f5f5; padding:20px; }
    h1 { text-align:center; }
    .box { background:#fff; padding:20px; border-radius:8px; max-width:400px; margin:auto; }
    input, select, button {
      width:100%; padding:10px; margin:8px 0;
    }
    button {
      background:#28a745; color:#fff; border:none; font-size:16px;
    }
  </style>
</head>

<body>

<h1>Office Cafe</h1>

<div class="box">
  <h3>Available Services</h3>

  <form id="serviceForm">
    <input type="text" id="name" placeholder="Your Name" required>
    <input type="tel" id="mobile" placeholder="Mobile Number" required>

   <select id="service" required onchange="checkOther()">
      <option value="">Select Service</option>
      <option>Aadhaar Card Print</option>
      <option>PAN Card</option>
      <option>Voter ID Card</option>
      <option>Income Certificate</option>
      <option>Domicile Certificate</option>
      <option>Nationality Certificate</option>
      <option>Caste Certificate</option>
      <option>Other Government Documents</option>
    </select>

    <button type="submit" id="submitBtn">Submit Request</button>
  </form>

  <p id="msg"></p>
</div>



<script>
let alreadySubmitted = false;

document.getElementById("serviceForm").addEventListener("submit", function(e){
  e.preventDefault();

  const msg = document.getElementById("msg");
  const btn = document.getElementById("submitBtn");

  // üî¥ If already submitted once
  if (alreadySubmitted) {
    msg.innerHTML =
      "‚ùå ‡§ï‡§æ‡§π‡•Ä‡§§‡§∞‡•Ä ‡§ö‡•Ç‡§ï ‡§ù‡§æ‡§≤‡•Ä. ‡§™‡•Å‡§®‡•ç‡§π‡§æ ‡§™‡•ç‡§∞‡§Ø‡§§‡•ç‡§® ‡§ï‡§∞‡§æ.";
    return;
  }

  // First time submit
  btn.disabled = true;
  btn.innerText = "Submitting...";

  fetch("https://script.google.com/macros/s/AKfycbwLaPJqwfsmYCawPbgB7UfzUK0zfy6_cS2xflvkW4Km94RJ31qv8cUmLPBuSe26377T/exec", {
    method: "POST",
    headers: {
      "Content-Type": "text/plain;charset=utf-8"
    },
   body: JSON.stringify({
  name: document.getElementById("name").value,
  mobile: document.getElementById("mobile").value,
  service: document.getElementById("service").value,
  message: document.getElementById("otherDoc").value
})

  })
  .then(res => res.text())
  .then(txt => {
    if (txt === "success") {
      alreadySubmitted = true; // ‚úÖ LOCK submission

      msg.innerHTML =
        "‚úÖ ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶!<br>Office Cafe ‡§≤‡§µ‡§ï‡§∞‡§ö ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ï‡§∞‡•á‡§≤ üôè";
    } else {
      msg.innerHTML =
        "‚ùå ‡§ï‡§æ‡§π‡•Ä‡§§‡§∞‡•Ä ‡§ö‡•Ç‡§ï ‡§ù‡§æ‡§≤‡•Ä. ‡§™‡•Å‡§®‡•ç‡§π‡§æ ‡§™‡•ç‡§∞‡§Ø‡§§‡•ç‡§® ‡§ï‡§∞‡§æ.";
      btn.disabled = false;
      btn.innerText = "Submit Request";
    }
  })
  .catch(() => {
    msg.innerHTML =
      "‚ùå ‡§ï‡§æ‡§π‡•Ä‡§§‡§∞‡•Ä ‡§ö‡•Ç‡§ï ‡§ù‡§æ‡§≤‡•Ä. ‡§™‡•Å‡§®‡•ç‡§π‡§æ ‡§™‡•ç‡§∞‡§Ø‡§§‡•ç‡§® ‡§ï‡§∞‡§æ.";
    btn.disabled = false;
    btn.innerText = "Submit Request";
  });
});
</script>
<script>
function checkOther() {
  const service = document.getElementById("service").value;
  const otherBox = document.getElementById("otherDoc");

  if (service === "Other Document") {
    otherBox.style.display = "block";
    otherBox.required = true;
  } else {
    otherBox.style.display = "none";
    otherBox.required = false;
    otherBox.value = "";
  }
}
</script>




</body>
</html>
